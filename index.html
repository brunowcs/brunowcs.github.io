
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>brunocarvalho.net</title>
	<meta name="author" content="Bruno Carvalho">
 
	
	<meta name="description" content="21/08/2017 bare, canonical, maas, metal, ubuntu Comments Gerenciando Bare Metal Com Metal as a Service (MaaS) Que tal gerenciar seus Bare Metal com &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="brunocarvalho.net" type="application/atom+xml">
	
	<link rel="canonical" href="http://brunocarvalho.net/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-79512610-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("brunowcs@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>

<nav id="main-nav">
<section class="aboutme">
  <p>
   <h2>	Bruno Carvalho </h2>
  </p>
  
  <p>
	<i> tecnologia, cotidiano e mais algumas coisas... </i>
  </p>
</section>

<ul class="main">
   <b><li><a href="/">Blog</a></li>
    <li><a href="/about">Sobre</a></li>
    <li><a href="/blog/archives">Archives</a></li></b>
</ul>



</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:brunowcs@gmail.com" title="Email">Email</a>
		
		
		
			<a class="google" href="https://plus.google.com/+brunocarvalho86" rel="author" title="Google+">Google+</a>
		
		
		
		
		
		
			<a class="linkedin" href="http://www.linkedin.com/in/xbrunocarvalho" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
</div>
</nav>	

<div>
<script language="Javascript" type="text/javascript">
  function my_search_google()
  {
    var query = document.getElementById("my-google-search").value;
    window.open("http://google.com/search?q=" + query
	+ "%20site:" + "http://brunocarvalho.net");
  }
</script>
<p> Buscar </p>
<form onsubmit="my_search_google()" >
  <input type="text" id="my-google-search">
</form>

<!-- <p><img class="center" src="images/rhcsa.png" title="Certificados"></p><br> -->

</div>

</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2017-08-21T00:00:00-03:00" data-updated="true" itemprop="datePublished">21/08/2017</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/bare/'>bare</a>, <a class='category' href='/blog/categories/canonical/'>canonical</a>, <a class='category' href='/blog/categories/maas/'>maas</a>, <a class='category' href='/blog/categories/metal/'>metal</a>, <a class='category' href='/blog/categories/ubuntu/'>ubuntu</a>


</div>
		
			<span class="comments"><a href="/blog/2017/08/21/gerenciando-bare-metal-com-metal-as-a-service-maas/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2017/08/21/gerenciando-bare-metal-com-metal-as-a-service-maas/" itemprop="url">Gerenciando Bare Metal Com Metal as a Service (MaaS)</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><img src="/images/maas/maaslogo.png" alt="" /></p>

<p>Que tal gerenciar seus Bare Metal com automação e eficiência? Te apresento o Metal as a Service (MaaS) uma ferramenta fantástica desenvolvida em Python pela Canonical que trás vários benefícios para gerenciar seus racks de Bare Metal e neste artigo irei falar um pouco das suas funções, instalação e configuração.</p>

<p>Segue abaixo algumas features do MaaS stable(2.2):</p>

<ul>
<li>Suporte para Bare Metal (ARM,Intel), KVM, VMWARE</li>
<li>Provisiona com Ubuntu, RHEL, CENTOS, SLES, OpenSUSE, Windows</li>
<li>Divide recursos por zonas Bare Metal/VM</li>
<li>IPAM coleção de Subnets IPV4/IPV6, VLAN tagging, DNS, proxy, NTP</li>
<li>REST API intregraçao com ferramentas de Devops Juju, Chef, Ansible, Puppet</li>
<li>Descobre automaticamente ativos de redes, VLAN, Subnets etc..</li>
<li>Enlist automático por PXE</li>
<li>Interface GUI e CLI para Ligar/Desligar, comissionar, implantar, teste de hardware, modo de manutenção e recuperação de S.O</li>
<li>Composição Dinâmica de Hardware por meio de POD Suporta Intel Rack Scale Design (RSD) e Virsh(KVM)</li>
<li>Configuração de Rede IP,VLAN,BOND,BRIDGE layout de disco Bcache, RAID, LVM</li>
</ul>


<p>  O MaaS foi desenvolvido para ambientes em escala Bare Metal,  mais também é possível gerenciar VM com Virsh(KVM). Suporta as  principais BMCs e controladores de chassi do mercado como IBM, Lenovo, Disco, Huawei, Dell, HP e Open Compute Project, está sendo utilizado por grandes plays do mercado como Microsoft, Nec, Verizon, At&amp;t, NTT atualmente sendo considerado uma das melhores ferramentas open source para gerenciamento de Bare Metal.</p>

<h1>Como funciona</h1>

<p>O MaaS possui uma arquitetura em camadas com um banco de dados postgresql usado na &lsquo;Region Controller (regiond)&rsquo; que lida com as solicitações. Já o Distributed Rack Controllers (rackd) fornecem serviços para cada rack.</p>

<p>Region controller(regiond):</p>

<ul>
<li> REST API server (TCP port 5240)</li>
<li> PostgreSQL database</li>
<li> DNS</li>
<li> caching HTTP proxy</li>
<li> Web GUI</li>
</ul>


<p>Rack Controller (rackd) fornece DHCP, IPMI, PXE, TFTP e outros serviços locais. Os rackd armazenam itens  como imagens de instalação do S.O no nível do rack para melhor desempenho, mas não mantenham nenhum estado além das credenciais para falar com o Region Controller.</p>

<p>Rack controller(rackd):</p>

<ul>
<li> DHCP</li>
<li> TFTP</li>
<li> HTTP (para images)</li>
<li> iSCSI</li>
<li> Power Management</li>
</ul>


<p>Tanto o regiond como o rackd podem ser escalados e configurados para alta disponibilidade.</p>

<p><img src="/images/maas/archmaas.png" alt="" /></p>

<h1>Instalando o MaaS</h1>

<p>Como podemos ver na arquitetura acima, em cada rack de servidor Bare Metal poderiamos ter um daemon chamado rackd que falaria via API com o regiond, isso e uma boa pratica para arquitetura de rede Layer 3 spine e leaf, mas neste exemplo vamos instalar tanto o regiond como o rackd em um unico servidor.</p>

<p>Adicionando repositorio e instalando o MaaS</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># apt-add-repository -yu ppa:maas/stable</span>
</span><span class='line'><span class="c"># apt install maas</span>
</span></code></pre></td></tr></table></div></figure>


<p>Após instalação precisamos criar um usurário administrativo.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># maas createadmin </span>
</span></code></pre></td></tr></table></div></figure>


<p>Depois da criação vamos acessar o painel via browser</p>

<p><strong> Acesse a URL:<a href="http://$API_HOST:5240/MAAS">http://$API_HOST:5240/MAAS</a> </strong></p>

<p>Entre com login e senha criado no passo anterior</p>

<p><img src="/images/maas/maaslogin.png" alt="" /></p>

<p>No primeiro login será apresentado uma tela de configuração, altere o nome da sua região se achar necessário e neste primeiro momento deixe como padrão os outros valores</p>

<p>Obs: para o MaaS conseguir Ligar e Desligar os servidores via IMPI será necessário um interface que chegue na rede da  IDRAC e/ou ILO</p>

<p><img src="/images/maas/maasfist.png" alt="" /></p>

<p>Agora vamos verificar quais serviços estão ativos, no painel click em “Nodes” selecione a aba “Controller” selecione o servidor da sua controller depois click na aba “Services”.
<img src="/images/maas/maasservices.png" alt="" /></p>

<p>Veja se sua img está sincronizada Click na Aba “Images”</p>

<p><img src="/images/maas/maasimage.png" alt="" /></p>

<ul>
<li>Ativando DHCP</li>
</ul>


<p>Vá para a aba &ldquo;Subnets&rdquo; e selecione a untagged VLAN/subnet  para a qual você deseja habilitar o DHCP, e no botão &ldquo;Take action&rdquo; selecione &ldquo;Provide DHCP&rdquo;.</p>

<ul>
<li>Defina o controlador de rack que gerenciará o DHCP.</li>
<li>Selecione a subrede para criar o intervalo dinâmico DHCP.</li>
<li>Preencha os detalhes para o intervalo dinâmico.</li>
</ul>


<p><img src="/images/maas/maasnetwork.png" alt="" /></p>

<p>Após ativar o DHCP, podemos inciar os bare mental na rede configurada que automaticamente ela realizará o boot via PXE e iniciará o processo de enlist, assim aparecendo no menu “Node” do painel MaaS, abaixo veja como funciona o ciclo de vida do seu Bare Metal/VM dentro do MaaS.</p>

<h1>Entenda o Lifecycle do MaaS</h1>

<p>Cada máquina (&ldquo;nó&rdquo;) gerenciada pelo MAAS passa por um ciclo de vida desde o alistamento até o comissionamento quando o nó será inventariado e iremos poder configurar elementos específicos do hardware. No ciclo também é possível alocamos um servidor para um usuário, realizar o deployer, e finalmente liberar de volta para um pool ou deletar por completo.</p>

<p><img src="/images/maas/maaslifecycle.png" alt="" /></p>

<p>Referências:</p>

<p><a href="https://maas.io/">https://maas.io/</a></p>

<p><a href="https://docs.ubuntu.com/maas/">https://docs.ubuntu.com/maas/</a></p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2017-08-01T00:00:00-03:00" data-updated="true" itemprop="datePublished">01/08/2017</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/canonical/'>canonical</a>, <a class='category' href='/blog/categories/juju/'>juju</a>, <a class='category' href='/blog/categories/openstack/'>openstack</a>, <a class='category' href='/blog/categories/ubuntu/'>ubuntu</a>


</div>
		
			<span class="comments"><a href="/blog/2017/08/01/palestra-openstack-day-sp-2017/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2017/08/01/palestra-openstack-day-sp-2017/" itemprop="url">Palestra OpenStack Day SP 2017</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Segue minha palestra no OpenStack Day SP 2017. Como a apresentação ficou corrida por conta do tempo e o ultimo slide de hands on não foi apresentado por problemas da internet local, fico a disposição para qualquer dúvida. Podem comentar, enviar e-mail que terei enorme prazer em ajudar. Abs</p>

<iframe width="595" height="315" src="https://www.youtube.com/embed/VCs1kcFUZEY" frameborder="0" allowfullscreen></iframe>




<iframe src="//www.slideshare.net/slideshow/embed_code/key/GEYv88ZwA2k8QE" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe>


<p> <div style="margin-bottom:5px"> <strong> <a href="//www.slideshare.net/scoker123/orquestrando-openstack-com-juju" title="Orquestrando OpenStack com Juju" target="_blank">Orquestrando OpenStack com Juju</a> </strong> de <strong><a target="_blank" href="https://www.slideshare.net/scoker123">TIVIT LATAM</a></strong> </div></p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2017-06-26T00:00:00-03:00" data-updated="true" itemprop="datePublished">26/06/2017</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/canonical/'>canonical,</a>, <a class='category' href='/blog/categories/juju/'>juju,</a>, <a class='category' href='/blog/categories/linux/'>linux,</a>, <a class='category' href='/blog/categories/lxd/'>lxd,</a>, <a class='category' href='/blog/categories/ubuntu/'>ubuntu</a>


</div>
		
			<span class="comments"><a href="/blog/2017/06/26/orquestracao-com-juju-da-canonical/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2017/06/26/orquestracao-com-juju-da-canonical/" itemprop="url">Orquestração Com Juju Da Canonical</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><img src="/images/juju/juju1.png" alt="" /></p>

<h3>O que é o Juju?</h3>

<p>Juju é uma ferramenta open source de modelagem de aplicações desenvolvida em Go pela Canonical a mesma empresa que desenvolve o Linux Ubuntu.</p>

<p>Com Juju é possível  implementar, configurar, gerenciar, manter e dimensionar aplicações em nuvens públicas e privadas de uma forma rápida e eficiente bem como servidores físicos,  OpenStack e contêineres. O Juju pode ser usado tanto em linha de comando ou através de uma interface GUI</p>

<h3>Como é feito a “Mágica”:</h3>

<p>A partir dos charmes é possível realizar a criação de toda uma infraestrutura no nivel de configuração da maquina virtual, instalação e configuração das aplicações, interligações de dependências, tanto na AWS, Google, Azure, OpenStack entre outras nuvem suportadas ou diretamente no Bare-Metal.</p>

<h3>Mas que desgraça é esse Charme?</h3>

<p>O charme define tudo o que você conhece de forma colaborativa sobre a implantação da aplicação. Tudo o que você precisa fazer é usar qualquer charme disponível (ou escrever o seu próprio), e a aplicação correspondente será implantada em segundos, em qualquer nuvem, servidor físico ou máquina virtual.</p>

<p>O Charme nada mais é do que um receita de instalação e configuração com gerenciamento de dependencias e interligações nescessárias para sua aplicação funcionar em uma nuvem ou em um bare-metal.</p>

<h3>Juju então é igual ao Chef, Puppet, Ansible e cia?</h3>

<p>Não! O Juju orquestra e escala aplicações em nuvens, ele está uma camada acima dos gereciadores de configurações, mas podemos usar todos juntos perfeitamente.</p>

<p>O puppet, Chef e Ansible são ótimas ferramentas para escrever arquivos de configuração. Por trabalhar uma camada acima, o Juju concentra-se nas operações de longo prazo necessárias para manter esse software em execução ao longo do tempo, independentemente da máquina na qual ele está sendo executado. O charme do Juju para um aplicativo inclui (entre outras coisas) toda a lógica para escrever arquivos de configuração para as aplicações, essa lógica em si pode ser escrita em qualquer linguagem ou ferramenta que o desenvolvedor do charme preferi.</p>

<p>É comum que as pessoas comecem a criar um charme juntando Puppet ou Chef ou outros scripts que eles atualmente usam para automatizar a configuração do ambiente. Se o charme vai estar escrevendo e atualizando a configuração para o aplicativo, e já existem ferramentas para abstrair esse arquivo de configuração na sua linguagem preferida (Puppet,Ansible, etc&hellip;), então use isso no charme!</p>

<p>Como podemos ver o Juju consegue reunir várias ferramentas de  automação, deixando você livre para criar seus charme com suas receitas e ferramentas favoritas, ainda melhor, dois charmes diferentes de diferentes equipes que usam ferramentas diferentes trabalharão felizes juntos para implantar uma solução.</p>

<p><img src="/images/juju/juju2.png" alt="" /></p>

<h3>Veja como é fácil instalar o Juju no Ubuntu Xenial</h3>

<p>Para fins de teste vamos instalar o juju com o LXD, que no caso poderia ser uma nuvem ou um bare-metal</p>

<pre><code>$ sudo apt install lxd zfsutils-linux
</code></pre>

<p>Para usar o LXD, seu usuário deve ser um membro do grupo lxd, verifique com o comando abaixo provavelmente já vai estar.</p>

<pre><code>$ groups
</code></pre>

<p>Ao executar o comando abaixo, aceite todas respostas padrão nas configurações iniciais do LXD, ou mude caso achar melhor.</p>

<pre><code>$ sudo lxd init 
</code></pre>

<p>LXD agora está basicamente configurado para funcionar com Juju.</p>

<h3>Instalando JUJU:</h3>

<pre><code>$ sudo add-apt-repository --update ppa:juju/stable
$ sudo apt install juju
</code></pre>

<p>Tanto para LXD, Bare-Metal ou nuvem será necessário a criação de um controle para gerenciar.</p>

<pre><code># juju bootstrap localhost lxd-test 
</code></pre>

<p>Isso pode demorar alguns minutos, pois o LXD deve baixar uma imagem do linux.</p>

<p>Uma vez concluído o processo, veja se o controlador lxd-test foi criado com o comando abaixo:</p>

<pre><code># juju controllers 
</code></pre>

<p>O comando a seguir mostra o controlador, modelo e o usuário atualmente ativo:</p>

<pre><code>#  juju whoami 
</code></pre>

<p>Implantando um aplicativo com Juju.</p>

<p>O comando abaixo vai até o Juju store pega um charme pronto chamado mediawiki-single e manda instalar no ambiente LXD que configuramos no inicio.</p>

<pre><code># juju deploy cs:bundle/mediawiki-single 
</code></pre>

<p>Após este comando, podemos verificando sua implementação:</p>

<pre><code># juju status
</code></pre>

<p>Comando de acesso ao ambiente criado</p>

<pre><code># juju ssh id_machine
</code></pre>

<p>Acesso GUI, o comando abaixo exibirá a URL de acesso a interface web do Juju.</p>

<pre><code># juju gui
</code></pre>

<p>Pegando a senha da controladora criada para logar no Juju Gui.</p>

<pre><code># juju show-controller --show-password
</code></pre>

<p>Mais comandos do Juju.</p>

<pre><code># juju help commands
</code></pre>

<p>Caso não queira realizar a instalação, a canonical disponibilizou um demo da sua interface GUI: <a href="https://demo.jujucharms.com/">https://demo.jujucharms.com/</a></p>

<p>Nos próximos posts irei apresentar:</p>

<ul>
<li>Juju com Cloud OpenStack</li>
<li>MaaS para integração do Juju com Bare-Metal.</li>
<li>Deployando Ceph com Juju.</li>
</ul>


<h3>Referências</h3>

<p><a href="https://jujucharms.com/docs/stable/">https://jujucharms.com/docs/stable/</a></p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2016-11-25T00:00:00-02:00" data-updated="true" itemprop="datePublished">25/11/2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/kvm/'>kvm</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/xen/'>xen</a>, <a class='category' href='/blog/categories/xenserver/'>xenserver</a>


</div>
		
			<span class="comments"><a href="/blog/2016/11/25/migrando-vm-xenserver-para-ovirt-slash-kvm/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/11/25/migrando-vm-xenserver-para-ovirt-slash-kvm/" itemprop="url">Migrando VM XenServer Para Ovirt/RHEV/KVM</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><img src="/images/ovirt/migracao.png" alt="" /></p>

<p>Depois de 4 anos utilizando XenServer, chegou a hora de dá um até breve. Atualmente estou migrando alguns ambientes XenServer para Ovirt/KVM pela sua constante evolução e integração com o projeto Openstack que vem crescendo muito no cenário opensource.</p>

<p>Primeiro passo será exporta sua VM pelo XenCenter ou pelo seu node console conforme o comando abaixo.</p>

<pre><code># xe vm-export vm=&lt;Name of VM&gt; filename=&lt;Name of file ending in ".xva"&gt;
</code></pre>

<p>Será gerado uma imagem com extensão .xva, jogue sua imagem exportada para seu node ovirt.</p>

<p>Desempacotando VM.</p>

<pre><code># tar -xvf vm.xva
</code></pre>

<p>No meu ambiente foi criado um diretório chamado Ref:10/</p>

<p>Baixe o script de migração (<a href="https://github.com/hswayne77/xenserverz_to_xen">https://github.com/hswayne77/xenserverz_to_xen</a>)</p>

<pre><code># wget wget https://raw.githubusercontent.com/hswayne77/xenserver_to_xen/master/xenmigrate_new.py
</code></pre>

<p>Execute os comandos para iniciar a migração da imagem.</p>

<pre><code># python xenmigrate.py -c Ref\:10/ vm.img

enmigrate 0.7.4 — 2011.09.13
(c)2011 Jolokia Networks and Mark Pace — jolokianetworks.com

convert ref dir : ./Ref:10/
to raw file : vm.img
last file : 20484
disk image size : 20 GB

RW notification every: 1.0GB
Converting: 1.0GBrw 2.0GBrw 3.0GBrw 4.0GBrw 5.0GBrw 6.0GBrw 7.0GBrw 8.0GBrw 9.0GBrw 10.0GBrw 11.0GBrw 12.0GBrw 13.0GBrw 14.0GBrw 15.0GBrw 16.0GBrw 17.0GBrw 18.0GBrw 19.0GBrw 20.0GBrw
Successful convert
</code></pre>

<p>Criando Domain Storage Export no Ovirt</p>

<p>Acesse no browse seu Ovirt Engine vá para:</p>

<p><strong>Sistema -> Data Centers -> Default -> Storage -> Novo Domain</strong></p>

<p>Crie um novo Dominio &ldquo;Export&rdquo; conforme a imagem abaixo.</p>

<p><img src="/images/ovirt/exportstorage.JPG" alt="" /></p>

<p>Baixe a última versão do projeto &ldquo;import-to-ovirt.pl&rdquo; no seguinte link <a href="http://git.annexia.org/?p=import-to-ovirt.git">http://git.annexia.org/?p=import-to-ovirt.git</a></p>

<p>Instale as dependências</p>

<pre><code># yum install perl-XML-Writer perl-Sys-Guestfs
</code></pre>

<p>Agora vamos importa a vm.img para o Domain Export que criamos utilizando o import-to-ovirt.pl</p>

<pre><code># export LIBGUESTFS_BACKEND=direct
# ./import-to-ovirt.pl vm.img node1.supcom:/storage/export
</code></pre>

<blockquote><p>Pode ser utilizado com imagem .qcow2</p></blockquote>

<p>Verifique se tudo ocorreu bem com a criação do OVF</p>

<pre><code>[root@node1 storage]# ls /storage/export/ad5e39a2-24d4-4a51-ac74-cfdf843c5f94/master/vms/88397ea1-196e-4aeb-8a57-29cff914caab/88397ea1-196e-4aeb-8a57-29cff914caab.ovf
</code></pre>

<p>Disponbilizando a VM no Ovirt Engine</p>

<p>Sistema -> Data Centers -> Default -> Cluster -> Default - > MVS -> Importar”:</p>

<p><img src="/images/ovirt/ovirtimport.JPG" alt="" /></p>

<p>Selecione o Export Domain criado, click em Carregar, Seleciona a VM, click na seta central, depois Próximo.</p>

<p><img src="/images/ovirt/ovirtimport2.JPG" alt="" /></p>

<p>Click OK e aguarde a VM ser importada.</p>

<p><strong>Após a importação será necessário realizar algumas alterações no momento da inicialização da VM:</strong></p>

<ul>
<li>Pressione &ldquo;e&rdquo; na inicialização do grub remova o &ldquo;console=hvc0&rdquo; e digite CTRL + X</li>
</ul>


<p><strong>Após a inicialização</strong></p>

<ul>
<li><p>Remova o &ldquo;console=hvc0&rdquo; /etc/default/grub e execute:</p>

<pre><code>  # update-grub
</code></pre></li>
<li><p>Verifique se seu fstab está correto e não tenha entradas xvda</p></li>
<li><p>Verifique sua network os uuid e MAC serão diferentes.</p></li>
<li><p>Edite o /etc/inittab comente a linha “co:2345:respawn:/sbin/getty &hellip; ”:</p></li>
</ul>


<blockquote><p>A vm migrada estava com Debian 7 e a migração foi executada com sucesso seguindo os procedimentos acima</p></blockquote>

<p><strong>Referências:</strong></p>

<p><a href="https://gfnork.de/blog/how-to-import-qcow2-images-to-ovirt/">https://gfnork.de/blog/how-to-import-qcow2-images-to-ovirt/</a></p>

<p><a href="https://rwmj.wordpress.com/2015/09/18/importing-kvm-guests-to-ovirt-or-rhev/">https://rwmj.wordpress.com/2015/09/18/importing-kvm-guests-to-ovirt-or-rhev/</a></p>

<p><a href="http://blog.zwiegnet.com/linux-server/export-vm-command-line-xenserver-6/">http://blog.zwiegnet.com/linux-server/export-vm-command-line-xenserver-6/</a></p>

<p><a href="https://wiki.debian.org/HowToMigrateBackAndForthBetweenXenAndKvm">https://wiki.debian.org/HowToMigrateBackAndForthBetweenXenAndKvm</a></p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2016-11-23T00:00:00-02:00" data-updated="true" itemprop="datePublished">23/11/2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/cloud/'>cloud</a>, <a class='category' href='/blog/categories/ebook/'>ebook</a>, <a class='category' href='/blog/categories/nuvem/'>nuvem</a>


</div>
		
			<span class="comments"><a href="/blog/2016/11/23/ebook-sobre-computacao-em-nuvem/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/11/23/ebook-sobre-computacao-em-nuvem/" itemprop="url">Ebook Sobre Computação Em Nuvem</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Olá pessoal, estou distribuindo este Ebook gratuito produzido pela Opus sobre Computação em Nuvem que achei muito bacana, espero que ajudem a entender um pouco mais sobre o universo Cloud Computing.</p>

<p>Abs</p>

<p><img src="/images/ebook/ebookcloud.png" alt="" /></p>

<p><a href="http://blog.opus-software.com.br/ebook/#/ebook-download?umsde5r=3211FAF9085532094869D82F0C9B72B8">Link para Download&hellip;</a></p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2016-11-21T00:00:00-02:00" data-updated="true" itemprop="datePublished">21/11/2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/nfs/'>nfs</a>, <a class='category' href='/blog/categories/ovirt/'>ovirt</a>, <a class='category' href='/blog/categories/virtualizacao/'>virtualização</a>


</div>
		
			<span class="comments"><a href="/blog/2016/11/21/instalando-ovirt-4-dot-0-hosted-engine-utilizando-nfs/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/11/21/instalando-ovirt-4-dot-0-hosted-engine-utilizando-nfs/" itemprop="url">Instalando Ovirt 4.0 Hosted Engine Utilizando NFS</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><img src="/images/ovirt/ovirt4.png" alt="" /></p>

<p><strong>Objetivo</strong></p>

<p>Instalar Ovirt 4.0 Hosted Engine utilizando NFS</p>

<p>No meu ambiente instalei tudo em um único node, o ovirt engine como VM no meu primeiro node, juntamente com NFS, mas para ambiente maiores recomendo a separação dos componentes para obter uma melhor performance e HA.</p>

<p><strong>Ambiente Utilizado</strong></p>

<ul>
<li>NODE1 FÍSICO: Intel Xeon 24 Core(Hyper-Threading) - 32G - CentoOS 7-x86_64-minimal</li>
<li>NFS STORAGE - 500GB</li>
<li>VM OVIRT MANAGER - Quad core, 16 GB RAM e 50 GB</li>
<li>SELINUX Desabilitado</li>
<li>NTP configurado</li>
</ul>


<p>Necessário servidor DNS, mas utilizei local para esta instalação</p>

<pre><code># cat /etc/hosts

192.168.10.200  ovirtengine.supcom
192.168.10.201  node1.supcom
</code></pre>

<p><strong>Instando e configurando NFS</strong></p>

<pre><code># yum -y install nfs-utils

# mkdir -p /storage/{engine,data,iso} 

# chown 36:36 /storage/{engine,data,iso}

# cat /etc/exports

/storage/engine 192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)
/storage/data   192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)
/storage/iso    192.168.10.0/24(rw,anonuid=36,anongid=36,all_squash)

# exportfs -a

# systemctl enable nfs-server.service
# systemctl restart nfs-server.service

# showmount -e
Export list for node1.supcom:
/storage/engine *
/storage/data   *
/storage/iso*
</code></pre>

<p><strong>Instalando pacotes necessários</strong></p>

<pre><code># yum install http://resources.ovirt.org/pub/yum-repo/ovirt-release40.rpm
# yum install ovirt-hosted-engine-setup ovirt-engine-appliance -y
</code></pre>

<p><strong>Iniciando deploy hosted engine</strong></p>

<pre><code># hosted-engine --deploy
[ INFO  ] Stage: Initializing
[ INFO  ] Generating a temporary VNC password.
[ INFO  ] Stage: Environment setup
  During customization use CTRL-D to abort.
  Continuing will configure this host for serving as hypervisor and create a VM where you have to install the engine afterwards.
</code></pre>

<p>Are you sure you want to continue? (Yes, No)[Yes]: <strong>Yes</strong></p>

<pre><code>  It has been detected that this program is executed through an SSH connection without using screen.
  Continuing with the installation may lead to broken installation if the network connection fails.
  It is highly recommended to abort the installation and run it inside a screen session using command "screen".
</code></pre>

<p>Do you want to continue anyway? (Yes, No)[No]: <strong>Yes</strong></p>

<pre><code>[ INFO  ] Hardware supports virtualization
  Configuration files: []
  Log file: /var/log/ovirt-hosted-engine-setup/ovirt-hosted-engine-setup-20161118133413-u1wg2v.log
  Version: otopi-1.5.2 (otopi-1.5.2-1.el7.centos)
[ INFO  ] Stage: Environment packages setup
[ INFO  ] Stage: Programs detection
[ INFO  ] Stage: Environment setup
[WARNING] Cannot locate gluster packages, Hyper Converged setup support will be disabled.
[ INFO  ] Please abort the setup and install vdsm-gluster, gluster-server &gt;= 3.7.2 and restart vdsmd service in order to gain Hyper Converged setup support.
[ INFO  ] Stage: Environment customization

  --== STORAGE CONFIGURATION ==--
</code></pre>

<p>Please specify the storage you would like to use (glusterfs, iscsi, fc, nfs3, nfs4)[nfs3]: <strong>nfs3</strong></p>

<p>Please specify the full shared storage connection path to use (example: host:/path): <strong>192.168.10.201:/storage/engine</strong></p>

<pre><code>[ INFO  ] Installing on first host

  --== SYSTEM CONFIGURATION ==--


  --== NETWORK CONFIGURATION ==--

[ INFO  ] Bridge ovirtmgmt already created
</code></pre>

<p>iptables was detected on your computer, do you wish setup to configure it? (Yes, No)[Yes]: <strong>Yes</strong></p>

<p>Please indicate a pingable gateway IP address [192.168.10.1]: <strong>192.168.10.1</strong></p>

<pre><code> --== VM CONFIGURATION ==--

      Booting from cdrom on RHEL7 is ISO image based only, as cdrom passthrough is disabled (BZ760885)
</code></pre>

<p>Please specify the device to boot the VM from (choose disk for the oVirt engine appliance)
(cdrom, disk, pxe) [disk]: <strong>disk</strong></p>

<p>Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: <strong>vnc</strong></p>

<pre><code>[ INFO  ] Detecting available oVirt engine appliances
  The following appliance have been found on your system:
[1] - The oVirt Engine Appliance image (OVA) - 4.0-20161115.1.el7.centos
[2] - Directly select an OVA file
</code></pre>

<p>Please select an appliance (1, 2) [1]: <strong>1</strong></p>

<pre><code>[ INFO  ] Verifying its sha1sum
[ INFO  ] Checking OVF archive content (could take a few minutes depending on archive size)
[ INFO  ] Checking OVF XML content (could take a few minutes depending on archive size)
[WARNING] OVF does not contain a valid image description, using default.
</code></pre>

<p>Would you like to use cloud-init to customize the appliance on the first boot (Yes, No)[Yes]? <strong>Yes</strong></p>

<p>Would you like to generate on-fly a cloud-init ISO image (of no-cloud type)
or do you have an existing one (Generate, Existing)[Generate]? <strong>Generate</strong></p>

<pre><code>      Please provide the FQDN you would like to use for the engine appliance.
      Note: This will be the FQDN of the engine VM you are now going to launch,
      it should not point to the base host or to any other existing machine.
</code></pre>

<p>Engine VM FQDN: (leave it empty to skip):  []: <strong>ovirtengine.supcom</strong></p>

<p>Automatically execute engine-setup on the engine appliance on first boot (Yes, No)[Yes]? <strong>No</strong></p>

<pre><code>    Please provide the domain name you would like to use for the engine appliance.
    Engine VM domain: [supcom]

      Enter root password that will be used for the engine appliance (leave it empty to skip):
      Confirm appliance root password:
      The following CPU types are supported by this host:
             - model_SandyBridge: Intel SandyBridge Family
             - model_Westmere: Intel Westmere Family
             - model_Nehalem: Intel Nehalem Family
             - model_Penryn: Intel Penryn Family
             - model_Conroe: Intel Conroe Family
      Please specify the CPU type to be used by the VM [model_SandyBridge]:
      Please specify the number of virtual CPUs for the VM (Defaults to appliance OVF value): [4]:
      [WARNING] Minimum requirements for disk size not met
      You may specify a unicast MAC address for the VM or accept a randomly generated default [00:16:3e:77:82:77]:
      Please specify the memory size of the VM in MB (Defaults to appliance OVF value): [16384]:
</code></pre>

<p>How should the engine VM network be configured (DHCP, Static)[DHCP]? Static
Please enter the IP address to be used for the engine VM [192.168.10.2]: <strong>192.168.10.200</strong></p>

<pre><code>      [ INFO  ] The engine VM will be configured to use 192.168.10.200/24
      Please provide a comma-separated list (max 3) of IP addresses of domain name servers for the engine VM
</code></pre>

<p>Engine VM DNS (leave it empty to skip) [8.8.8.8]: <strong>8.8.8.8</strong></p>

<pre><code>      Add lines for the appliance itself and for this host to /etc/hosts on the engine VM?
</code></pre>

<p>Note: ensuring that this host could resolve the engine VM hostname is still up to you
(Yes, No)[No] <strong>Yes</strong></p>

<pre><code>      --== HOSTED ENGINE CONFIGURATION ==--

      Enter engine admin password:
      Confirm engine admin password:
      Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]: node1-engine
      Please provide the name of the SMTP server through which we will send notifications [localhost]:
      Please provide the TCP port number of the SMTP server [25]:
      Please provide the email address from which notifications will be sent [root@localhost]:
      Please provide a comma-separated list of email addresses which will get notifications [root@localhost]:
        [ INFO  ] Stage: Setup validation

      --== CONFIGURATION PREVIEW ==--

      Bridge interface                   : em2
      Engine FQDN                        : ovirtengine.supcom
      Bridge name                        : ovirtmgmt
      Host address                       : node1.supcom
      SSH daemon port                    : 22
      Firewall manager                   : iptables
      Gateway address                    : 192.168.10.1
      Host name for web application      : node1-engine
      Storage Domain type                : nfs3
      Host ID                            : 1
      Image size GB                      : 10
      Storage connection                 : 192.168.10.201:/storage/engine
      Console type                       : vnc
      Memory size MB                     : 16384
      MAC address                        : 00:16:3e:17:ac:23
      Boot type                          : disk
      Number of CPUs                     : 4
      OVF archive (for disk boot)        : /usr/share/ovirt-engine-appliance/ovirt-engine-appliance-4.0-20161115.1.el7.centos.ova
      Appliance version                  : 4.0-20161115.1.el7.centos
      Restart engine VM after engine-setup: True
      CPU Type                           : model_SandyBridge
</code></pre>

<p>Acima o resumo da minha configuração, mude o que achar necessário conforme seu ambiente.</p>

<p>Please confirm installation settings (Yes, No)[Yes]: <strong>Yes</strong></p>

<pre><code>    [ INFO  ] Stage: Transaction setup
    [ INFO  ] Stage: Misc configuration
    [ INFO  ] Stage: Package installation
    [ INFO  ] Stage: Misc configuration
    [ INFO  ] Configuring libvirt
    [ INFO  ] Configuring VDSM
    [ INFO  ] Starting vdsmd
    [ INFO  ] Waiting for VDSM to reply
    [ INFO  ] Creating Storage Domain
    [ INFO  ] Creating Storage Pool
    [ INFO  ] Connecting Storage Pool
    [ INFO  ] Verifying sanlock lockspace initialization
    [ INFO  ] Creating Image for 'hosted-engine.lockspace' ...
    [ INFO  ] Image for 'hosted-engine.lockspace' created successfully
    [ INFO  ] Creating Image for 'hosted-engine.metadata' ...
    [ INFO  ] Image for 'hosted-engine.metadata' created successfully
    [ INFO  ] Creating VM Image
    [ INFO  ] Extracting disk image from OVF archive (could take a few minutes depending on archive size)
    [ INFO  ] Validating pre-allocated volume size
    [ INFO  ] Uploading volume to data domain (could take a few minutes depending on archive size)
    [ INFO  ] Image successfully imported from OVF
    [ INFO  ] Destroying Storage Pool
    [ INFO  ] Start monitoring domain
    [ INFO  ] Configuring VM
    [ INFO  ] Updating hosted-engine configuration
    [ INFO  ] Stage: Transaction commit
    [ INFO  ] Stage: Closing up
    [ INFO  ] Creating VM
      You can now connect to the VM with the following command:
            hosted-engine --console
      You can also graphically connect to the VM from your system with the following command:
            remote-viewer vnc://node1.supcom:5900
      Use temporary password "1485XCFX" to connect to vnc console.
      Please ensure that your Guest OS is properly configured to support serial console according to your distro documentation.
      Follow http://www.ovirt.org/Serial_Console_Setup#I_need_to_access_the_console_the_old_way for more info.
      If you need to reboot the VM you will need to start it manually using the command:
      hosted-engine --vm-start
      You can then set a temporary password using the command:
      hosted-engine --add-console-password
      Please install and setup the engine in the VM.
      You may also be interested in installing ovirt-guest-agent-common package in the VM.


      The VM has been rebooted.
      To continue please install oVirt-Engine in the VM
      (Follow http://www.ovirt.org/Quick_Start_Guide for more info).

      Make a selection from the options below:
      (1) Continue setup - oVirt-Engine installation is ready and ovirt-engine service is up
      (2) Abort setup
      (3) Power off and restart the VM
      (4) Destroy VM and abort setup

      (1, 2, 3, 4)[1]:
</code></pre>

<p>A partir desse ponto você precisar conectar na VM via VNC, para inciar o setup da engine.</p>

<p>Na minha instalação eu utilizei o Tightvnc (<a href="http://www.tightvnc.com/download.php">http://www.tightvnc.com/download.php</a>)</p>

<p>Após acessar via vnc a maquina virtual, execute o seguinte comando</p>

<pre><code>[root@ovirtengine ~]# engine-setup
[ INFO  ] Stage: Initializing
[ INFO  ] Stage: Environment setup
  Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf', '/etc/ovirt-engine-setup.conf.d/10-packaging.conf']
  Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20161118191609-oxmvpo.log
  Version: otopi-1.5.2 (otopi-1.5.2-1.el7.centos)
[ INFO  ] Stage: Environment packages setup

......................
......................

--== END OF CONFIGURATION ==--

[ INFO  ] Stage: Setup validation
[WARNING] Cannot validate host name settings, reason: cannot resolve own name 'ovirtengine'

      --== CONFIGURATION PREVIEW ==--

      Application mode                        : both
      Default SAN wipe after delete           : False
      Firewall manager                        : firewalld
      Update Firewall                         : True
      Host FQDN                               : ovirtengine.supcom
      Engine database secured connection      : False
      Engine database host                    : localhost
      Engine database user name               : engine
      Engine database name                    : engine
      Engine database port                    : 5432
      Engine database host name validation    : False
      DWH database secured connection         : False
      DWH database host                       : localhost
      DWH database user name                  : ovirt_engine_history
      DWH database name                       : ovirt_engine_history
      DWH database port                       : 5432
      DWH database host name validation       : False
      Engine installation                     : True
      NFS setup                               : False
      PKI organization                        : supcom
      Configure local Engine database         : True
      Set application as default page         : True
      Configure Apache SSL                    : True
      DWH installation                        : True
      Configure local DWH database            : True
      Engine Host FQDN                        : ovirtengine.supcom
      Configure Image I/O Proxy               : True
      Configure VMConsole Proxy               : True
      Configure WebSocket Proxy               : True

      Please confirm installation settings (OK, Cancel) [OK]: OK
</code></pre>

<p>Retirei parte do log padrão para não ficar muito grande o post, acima segue o resumo da minha configuração. Visto que todo ambiente será instalado nessa vm, tanto banco de dados como o DWH, então basta confirmar e seguir a configuração padrão.</p>

<pre><code>[ INFO  ] Stage: Transaction setup
[ INFO  ] Stopping engine service
[ INFO  ] Stopping ovirt-fence-kdump-listener service
[ INFO  ] Stopping dwh service
[ INFO  ] Stopping Image I/O Proxy service
[ INFO  ] Stopping websocket-proxy service
[ INFO  ] Stage: Misc configuration
[ INFO  ] Stage: Package installation
[ INFO  ] Stage: Misc configuration
[ INFO  ] Upgrading CA
[ INFO  ] Initializing PostgreSQL
[ INFO  ] Creating PostgreSQL 'engine' database
[ INFO  ] Configuring PostgreSQL
[ INFO  ] Creating PostgreSQL 'ovirt_engine_history' database
[ INFO  ] Configuring PostgreSQL
[ INFO  ] Creating CA
[ INFO  ] Creating/refreshing Engine database schema
[ INFO  ] Creating/refreshing DWH database schema
[ INFO  ] Configuring Image I/O Proxy
[ INFO  ] Setting up ovirt-vmconsole proxy helper PKI artifacts
[ INFO  ] Setting up ovirt-vmconsole SSH PKI artifacts
[ INFO  ] Configuring WebSocket Proxy
[ INFO  ] Creating/refreshing Engine 'internal' domain database schema
[ INFO  ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf'
[ INFO  ] Stage: Transaction commit
[ INFO  ] Stage: Closing up
[ INFO  ] Starting engine service
[ INFO  ] Restarting nfs services
[ INFO  ] Starting dwh service
[ INFO  ] Restarting ovirt-vmconsole proxy service

  --== SUMMARY ==--

[ INFO  ] Restarting httpd
  Please use the user 'admin@internal' and password specified in order to login
  Web access is enabled at:
  http://ovirtengine.supcom:80/ovirt-engine
  https://ovirtengine.supcom:443/ovirt-engine
  Internal CA 81:C1:01:AD:28:0E:46:8F:86:A8:BB:12:E9:BB:2B:5F:0E:8C:F0:8D
  SSH fingerprint: d7:7b:83:5b:54:6e:46:7b:c1:2c:c0:6e:ae:a1:4c:1e

  --== END OF SUMMARY ==--

[ INFO  ] Stage: Clean up
  Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20161118192015-muij8n.log
[ INFO  ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20161118192638-setup.conf'
[ INFO  ] Stage: Pre-termination
[ INFO  ] Stage: Termination
[ INFO  ] Execution of setup completed successfully
</code></pre>

<p>Após a finalização, vamos voltar para o node1 e selecionar a primeira opção, para finalizar.</p>

<pre><code>Make a selection from the options below:
  (1) Continue setup - oVirt-Engine installation is ready and ovirt-engine service is up
  (2) Abort setup
  (3) Power off and restart the VM
  (4) Destroy VM and abort setup

  (1, 2, 3, 4)[1]: 1

Checking for oVirt-Engine status at ovirtengine.supcom...
[ INFO  ] Engine replied: DB Up!Welcome to Health Status!
[ INFO  ] Acquiring internal CA cert from the engine
[ INFO  ] The following CA certificate is going to be used, please immediately interrupt if not correct:
[ INFO  ] Issuer: C=US, O=supcom, CN=ovirtengine.supcom.60122, Subject: C=US, O=supcom, CN=ovirtengine.supcom.60122, Fingerprint (SHA-1): 81C101AD280E468F86A8BB12E9BB2B5F0E8CF08D
[ INFO  ] Connecting to the Engine
[ INFO  ] Waiting for the host to become operational in the engine. This may take several minutes...
[ INFO  ] Still waiting for VDSM host to become operational...
[ INFO  ] The VDSM Host is now operational
[ INFO  ] Saving hosted-engine configuration on the shared storage domain

  Please shutdown the VM allowing the system to launch it as a monitored service.
  The system will wait until the VM is down.
</code></pre>

<p>Agora vamos voltar ao ovirtengine e reiniciar a vm.</p>

<pre><code>[root@ovirtengine ~]# shutdown -r now
</code></pre>

<p>Voltando ao node1, percebemos que a instalação finalizou com sucesso.</p>

<pre><code>[ INFO  ] Enabling and starting HA services
[ INFO  ] Stage: Clean up
[ INFO  ] Generating answer file '/var/lib/ovirt-hosted-engine-setup/answers/answers-20161118174208.conf'
[ INFO  ] Generating answer file '/etc/ovirt-hosted-engine/answers.conf'
[ INFO  ] Stage: Pre-termination
[ INFO  ] Stage: Termination
[ INFO  ] Hosted Engine successfully deployed
[root@node1 ~]#
</code></pre>

<p>Vamos agora iniciar o hosted-engine</p>

<pre><code>[root@node1 ~]# hosted-engine --vm-start
</code></pre>

<p>Caso a vm ovirtengine não inicie, restart os serviços</p>

<pre><code>[root@node1 ~]# systemctl restart ovirt-ha-agent &amp;&amp; systemctl restart ovirt-ha-broker &amp;&amp; systemctl restart vdsmd
[root@node1 ~]# hosted-engine --vm-start
[root@node1 ~]# hosted-engine --vm-status

--== Host 1 status ==--

Status up-to-date  : True
Hostname   : node1.supcom
Host ID: 1
Engine status  : {"health": "good", "vm": "up", "detail": "up"}
Score  : 3400
stopped: False
Local maintenance  : False
crc32  : f322c3c1
Host timestamp : 235828
Extra metadata (valid at timestamp):
metadata_parse_version=1
metadata_feature_version=1
timestamp=235828 (Mon Nov 21 13:29:31 2016)
host-id=1
score=3400
maintenance=False
state=EngineUp
stopped=False
</code></pre>

<p>Agora vá para browser e acesse o portal de administração</p>

<pre><code>https://ovirtengine.supcom/ovirt-engine/
</code></pre>

<p>login:admin</p>

<p>senha: que você configurou na instalação</p>

<p><img src="/images/ovirt/ovirtlogin.JPG" alt="" /></p>

<p><strong>Adicionando Storage Data</strong></p>

<p>Sistema -> Data Centers -> Default -> Storage -> Novo Dominio”:</p>

<p><img src="/images/ovirt/addstorage.JPG" alt="" /></p>

<p><strong>Adicionando Storage ISO</strong></p>

<p><img src="/images/ovirt/addstorageiso.JPG" alt="" /></p>

<p><img src="/images/ovirt/storageisoaguardando.JPG" alt="" /></p>

<p>Agora basta aguarda o storage ficar ativo.</p>

<p><img src="/images/ovirt/storageisook.JPG" alt="" /></p>

<p><strong>Adicionando imagem ISO no Dominio criado</strong></p>

<p>Acesse o ovirtengine e digite os comandos abaixo</p>

<pre><code>[root@ovirtengine ~]# wget http://mirror.globo.com/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1511.iso

[root@ovirtengine ~]# engine-iso-uploader upload -i node1-iso CentOS-7-x86_64-Minimal-1511.iso -r ovirtengine.supcom --insecure
Please provide the REST API password for the admin@internal oVirt Engine user (CTRL+D to abort):
Uploading, please wait...
INFO: Start uploading CentOS-7-x86_64-Minimal-1511.iso
Uploading: [########################################] 100%
INFO: CentOS-7-x86_64-Minimal-1511.iso uploaded successfully
</code></pre>

<blockquote><p>Caso receba nfs timeout verifique se o firewall do node1.supcom não está bloqueando.</p></blockquote>

<p><strong>Criando VM</strong></p>

<p>Sistema -> Data Centers -> Default -> Cluster -> Default - > MVS -> Novo MV”:</p>

<p>Após digitar o nome da VM,  vamos criar o disco da VM em &ldquo;Imagens de Instâncias&rdquo; click em Criar</p>

<p><img src="/images/ovirt/novavm.JPG" alt="" /></p>

<p>Digite o Tamanho, verifique se o storage domain está correto e click em OK</p>

<p><img src="/images/ovirt/createdisk.JPG" alt="" /></p>

<p>Selecione a rede que foi configurada por padrão na instalação.(bridge ovirtmgmt)</p>

<p><img src="/images/ovirt/confrede.jpg" alt="" /></p>

<p>Configure a memória e o CPU e click em OK.</p>

<p><img src="/images/ovirt/vmmemoria.JPG" alt="" /></p>

<p>Agora vamos iniciar a VM  clicando em &ldquo;Executar uma vez&rdquo; para iniciar o sistema com boot da nossa ISO CentOS</p>

<p><img src="/images/ovirt/iniciarvm.JPG" alt="" /></p>

<p>Selecione nossa ISO e marque a opção &ldquo;Colocar CD&rdquo;</p>

<p><img src="/images/ovirt/iniciariso.JPG" alt="" /></p>

<p>Agora vamos Abrir o Console da VM para iniciar a Instalação.</p>

<p><img src="/images/ovirt/abrirconsole.JPG" alt="" /></p>

<p>Para o Remote Viewer abrir será nescessario baixar O Virt Manager (<a href="https://virt-manager.org/download/">https://virt-manager.org/download/</a>)</p>

<p><img src="/images/ovirt/centosinstall.JPG" alt="" /></p>

<p><strong>Troubleshooting:</strong></p>

<p>Resolvendo problema com &ldquo; Failed to acquire lock: No space left on device &rdquo; ao iniciar a vm hosted engine</p>

<pre><code>[root@node1 ~]# vdsClient -s 0 list
.........
.........
exitMessage = Failed to acquire lock: No space left on device
..........
..........
[root@node1 ~]# hosted-engine --vm-poweroff
[root@node1 ~]# sanlock direct init -s hosted-engine:0:/rhev/data-center/mnt/&lt;INTERNAL HE SD&gt;/&lt;SDUUID&gt;/ha_agent/hosted-engine.lockspace:0
[root@node1 ~]# systemctl restart ovirt-ha-agent &amp;&amp; systemctl restart ovirt-ha-broker &amp;&amp; systemctl restart vdsmd &amp;&amp; systemctl restart supervdsmd 
[root@node1 ~]# hosted-engine --vm-start
</code></pre>

<p><strong>Referência:</strong></p>

<p><a href="http://www.ovirt.org/documentation/">http://www.ovirt.org/documentation/</a></p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2016-11-17T00:00:00-02:00" data-updated="true" itemprop="datePublished">17/11/2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/rsync/'>rsync</a>


</div>
		
			<span class="comments"><a href="/blog/2016/11/17/continuando-transferencia-com-rsync-no-caso-de-interrupcao/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/11/17/continuando-transferencia-com-rsync-no-caso-de-interrupcao/" itemprop="url">Continuando Transferência Com RSYNC No Caso De Interrupção</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><img src="/images/rsync.jpg" alt="rysnc" /></p>

<p>Olá turmadaaa, precisei realizar uma transferência de uma VM do XenServer com 300G que estava em um ponto de montagem NFS para um outro local remoto e para evitar problemas de interrupção, utilizei o comando abaixo que me permiti continuar a transferência em casos de problemas, como perda de conexão etc&hellip;</p>

<pre><code># rsync -vrlPtz --append /mnt/web.xva /storage/export/
    sending incremental file list
    web.xva     4641783808   1%   6.89MB/s    9:57:11
</code></pre>

<p>O Comando acima basicamente irá comprimir, continuar e salvar parcialmente apresentando a saída em detalhes. Pode ser utilizado com apenas um arquivo ou com diretórios.</p>

<p>Caso queira usar com ssh:</p>

<pre><code># rsync -vrlPtz --append -e 'ssh -p 2222' login@host:/tmp/web.xva /tmp/web.xva
</code></pre>

<p>Dica SSH Com Tunnel: ssh -L 2222:hostlocal:2222 root@hostremoto</p>

<hr />

<p><strong>Referência:</strong></p>

<p><a href="https://download.samba.org/pub/rsync/rsync.html">https://download.samba.org/pub/rsync/rsync.html</a></p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2016-10-04T00:00:00-03:00" data-updated="true" itemprop="datePublished">04/10/2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/cotidiano/'>cotidiano</a>, <a class='category' href='/blog/categories/realidade/'>realidade</a>


</div>
		
			<span class="comments"><a href="/blog/2016/10/04/empregos-morrem-e-empregos-nascem/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/10/04/empregos-morrem-e-empregos-nascem/" itemprop="url">Empregos Morrem E Empregos Nascem</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><img src="/images/digitau.jpg" alt="" /></p>

<p>No Brasil funciona assim:</p>

<ul>
<li><p>Itaú Digital = Desemprego</p></li>
<li><p>Uber = Desemprego</p></li>
</ul>


<p>Passamos da era agrícola, industrial, o mundo já está entrando na era pós tecnológica. Porque será que apenas no Brasil não dá certo? Será que nosso País não evoluiu ao ponto de entender que o mundo mudou?</p>

<p>Em vários lugares a era digital foi melhor para o consumidor, está claro que proibir o progresso e o desenvolvimento para manter empregos antiquados será menos efetivo e pior para todos! Alguns dos empregos mais desejados hoje não existiam a 10 anos atrás, estamos entrando em uma era de novas oportunidades, entenda que empregos morrem e empregos nascem.</p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2016-09-23T00:00:00-03:00" data-updated="true" itemprop="datePublished">23/09/2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/centos/'>centos</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/rhel/'>rhel</a>, <a class='category' href='/blog/categories/satellite/'>satellite</a>


</div>
		
			<span class="comments"><a href="/blog/2016/09/23/alterando-host-pelo-foreman-rake-no-red-hat-satellite-6-dot-x/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/09/23/alterando-host-pelo-foreman-rake-no-red-hat-satellite-6-dot-x/" itemprop="url">Alterando Host Pelo Foreman-rake No Red Hat Satellite 6.x</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Atualmente tive problema com interface invalida ao atualizar provisionamento do host utulizando o dashboard no satellite 6.2.</p>

<p>Este problema ocorre por alguma mudança na interface que foi atualizado pelo factor do satellite e no momento a interface não existe mais e/ou está inconsistente com os dados fornecidos.</p>

<p>Abaixo executo comandos para contorna esse problema, removendo uma interface invalida no host.</p>

<pre><code># foreman-rake console
Loading production environment (Rails 4.1.5)

irb(main):001:0&gt; host = Host.find_by_name('HOSTNAME')

irb(main):003:0&gt; i = host.interfaces[1]

irb(main):004:0&gt; i.destroy
</code></pre>

<p>Trocando o array &ldquo;host.interfaces[0,1,2]&rdquo; você pode navegar em todas interfaces, veja no dashboard ao editar e atualizar o host, quais estão apresentado problemas e remova pelo foreman-rake.</p>

<p>Caso queira editar algum atributo da interface pelo foreman-rake utilize da seguinte forma.</p>

<pre><code># foreman-rake console
Loading production environment (Rails 4.1.5)

irb(main):001:0&gt; host = Host.find_by_name('HOSTNAME')

irb(main):002:0&gt; i = host.interfaces[0]

irb(main):003:0&gt; i.name = "hostname"

irb(main):004:0&gt; i.save!
</code></pre>

<p>Adpatando os comandos acima pode ser alterar varios atributos do provisionamento pelo foreman-rake.</p>

		
		
	</div>


</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">



















<time datetime="2016-08-19T00:00:00-03:00" data-updated="true" itemprop="datePublished">19/08/2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/centos/'>centos</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/rhel/'>rhel</a>, <a class='category' href='/blog/categories/satellite/'>satellite</a>


</div>
		
			<span class="comments"><a href="/blog/2016/08/19/iniciando-jornada-com-satellite-6-dot-2/#disqus_thread">Comments</a></span>
	
			
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/08/19/iniciando-jornada-com-satellite-6-dot-2/" itemprop="url">Iniciando Jornada Com Satellite 6.2</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Recentemente a Red hat lançou o Satellite 6.2 GA, um produto que ganhou grandes melhorias e novas funcionalidades.</p>

<p><img src="/images/satellite/img1.jpg" alt="img1" /></p>

<p>O Satellite se tornou um produto essencial para gerenciamento de ciclo de vida de sistemas da Red Hat em ambientes físicos, virtuais, nuvens privadas e públicas. A ferramenta apresenta implementação remota e estende a capacidade de gestão de pacotes, configurações, máquinas virtuais, containers, segurança entre grandes outras funcionalidades.</p>

<p>Uma das funcionalidades mais interessante dessa nova versão e o Remote Execute e Job Scheduling utilizando ssh. Agora será possível agenda execuções remotas em todos hosts. O OpenSCAP utilizado para auditoria de segurança, agora já vem instalado junto com o Satellite 6.2, antes precisava ser instalado manualmente. Melhorias no console web ficou notório, também percebi que a interface web está mais rápida.</p>

<p>Então amigos administradores de RHEL/CentOS, se você utiliza o Red Hat Satellite 5 e está pensando em implementar o Satellite 6, pode iniciar sua jornada, o  Satellite 6.2 GA está finalmente atingindo o nível de maturidade necessária para gerir ambientes de pequeno e grande porte.</p>

<h1>Migração</h1>

<p>Atualmente estou utilizando a versão 6.1 e abaixo vou listar os passos e dificuldades encontradas no meu ambiente para migração do 6.2 GA.</p>

<blockquote><p>Não será possível realizar migração de 6.2 Beta para 6.2 GA, antes de iniciar a migração para 6.2 verifique se seu ambiente está atualizado e com a versão 6.1.9. Não se esqueça de realizar o backup do ambiente atual.</p></blockquote>

<p>Verificando se existe alguma atualização recente.
Desabilite todos repositórios, deixe apenas os seguintes habilitado:</p>

<pre><code># subscription-manager repos --disable=*
# subscription-manager repos --enable=rhel-7-server-rpms
# subscription-manager repos --enable=rhel-7-server-satellite-6.1-rpms
# yum update
</code></pre>

<blockquote><p>Caso atualize o kernel será necessário reiniciar o sistema</p></blockquote>

<p>Após o update do S.O e dos novos pacotes, o satellite já estará com a versão 6.1.9, execute o seguinte comando para finalizar:</p>

<pre><code># katello-installer --upgrade

Upgrading...
Upgrade Step: stop_services...
Upgrade Step: start_mongo...
Upgrade Step: migrate_pulp...
Upgrade Step: start_httpd...
Upgrade Step: migrate_candlepin...
Upgrade Step: migrate_foreman...
Upgrade Step: Running installer...
Installing Done   [100%] 

[......................................................]
  The full log is at /var/log/katello-installer/katello-installer.log
Upgrade Step: restart_services...
Upgrade Step: db_seed...
Upgrade Step: errata_import (this may take a while) ...
Upgrade Step: update_gpg_urls (this may take a while) ...
Upgrade Step: update_repository_metadata (this may take a while) ...
Katello upgrade completed!
</code></pre>

<p>Vamos realizar um check antes de realizar a migração para o 6.2.</p>

<pre><code># foreman-rake katello:upgrade_check

This script makes no modifications and can be re-run multiple times for the most up to date results.
Checking upgradeability...

Checking for running tasks...
[FAIL] - There are 35 active tasks.

Checking the current version...
[PASS] - Current version of the Katello Ruby RPM is 2.2.0.92 and needs to greater than or equal to 2.2.0.90

Checking content hosts...
Calculating Host changes on upgrade.  This may take a few minutes.


Summary:
Content hosts to be preserved: 169
Content hosts to be deleted: 3
Details on Content Hosts planned for deletion saved to /tmp/pre-upgrade-1471033031.csv
You may want to manually resolve some of the conflicts and duplicate Content Hosts.
Upon upgrade those found for deletion will be removed permanently.
</code></pre>

<p>Como podemos ver minha migração apresentará falha <strong>&ldquo; [FAIL] - There are 35 active tasks.&rdquo;</strong> Resolvendo active tasks provável lock, podemos ir manualmente na Web gui Monitor->Tasks e filtrar pelas tasks que estão em lock, assim executando manualmente os skip, também podemos identificar pelo hammer.</p>

<p>Apresenta um resumo das tasks em pausa</p>

<pre><code># hammer task resume --search "state=paused"
</code></pre>

<p>Apresenta todas tasks em pausa</p>

<pre><code># hammer task list --search "state=paused"
</code></pre>

<p>Removendo tasks em lock pelo foreman-rake</p>

<pre><code># service foreman-tasks stop  
# foreman-rake console

irb(main):001:0&gt; ForemanTasks::Task.where(:state =&gt; :planned).where(:label =&gt; "Actions::Katello::Repository::Sync").destroy_all
irb(main):002:0&gt; ForemanTasks::Task.where(:state =&gt; :planned).where(:label =&gt; "Actions::Katello::System::GenerateApplicability").destroy_all
irb(main):003:0&gt; ForemanTasks::Task.where(:state =&gt; :paused).where(:label =&gt; "Actions::Katello::Repository::Sync").destroy_all
irb(main):004:0&gt; ForemanTasks::Task.where(:state =&gt; :paused).where(:label =&gt; "Actions::Katello::System::GenerateApplicability").destroy_all
irb(main):005:0&gt; ForemanTasks::Task.where(:label =&gt; "Actions::Candlepin::ListenOnCandlepinEvents").destroy_all

Caso nescessário remova a task pelo id
irb(main):001:0&gt; ForemanTasks::Task.find("799bc5fb-2d4c-4d0d-9d7d-4e42e9a8ace8").destroy

Saindo do Foreman rake
irb(main):002:0&gt; exit
# service foreman-tasks start 
</code></pre>

<p>Reindexando o banco de dados para evitar futuras inconsistências</p>

<pre><code># foreman-rake katello:reindex
# katello-service restart
</code></pre>

<p>Executando novamente o upgrade_check podemos notar que as  pendência de tasks foram solucionadas.</p>

<pre><code># foreman-rake katello:upgrade_check

This script makes no modifications and can be re-run multiple times for the most up to date results.
Checking upgradeability...

Checking for running tasks...
[PASS] - There are 0 active tasks.

Checking the current version...
[PASS] - Current version of the Katello Ruby RPM is 2.2.0.92 and needs to greater than or equal to 2.2.0.90

Checking content hosts...
Calculating Host changes on upgrade.  This may take a few minutes.


Summary:
Content hosts to be preserved: 169
Content hosts to be deleted: 3
Details on Content Hosts planned for deletion saved to /tmp/pre-upgrade-1471269446.csv
You may want to manually resolve some of the conflicts and duplicate Content Hosts.
Upon upgrade those found for deletion will be removed permanently.
</code></pre>

<h1>Iniciando processo de upgrade 6.2</h1>

<p>Desabilitar repositório Satellite 6.1</p>

<pre><code># subscription-manager repos --disable rhel-7-server-satellite-6.1-rpms
</code></pre>

<p>Habilitando repositórios necessário</p>

<pre><code># subscription-manager repos --enable rhel-7-server-satellite-6.2-rpms

# subscription-manager repos --enable=rhel-server-rhscl-7-rpms
</code></pre>

<p>Parando serviço</p>

<pre><code># katello-service stop
</code></pre>

<p>Limpando cache yum</p>

<pre><code># yum clean all
</code></pre>

<p>Upgrade de todos pacotes do sistema</p>

<pre><code># yum update
</code></pre>

<p>Upgrade do ambiente satellite</p>

<pre><code># satellite-installer --scenario satellite --upgrade
</code></pre>

<p>Nessa etapa acima encontrei um erro de migração que estava relacionado a ambiente puppet orfão, caso ocorra um erro parecido, tente remove o ambiente puppet informado na msg e execute o comando novamente.</p>

<blockquote><p>foreman-rake katello:upgrades:3.0:update_puppet_repository_distributors
Updating Puppet Repository Distributors
Updating Content View Puppet Environment Distributors
rake aborted!
ForemanTasks::TaskError: Task 541787f6-ad56-449a-be6f-1b2001fc3538: Katello::Errors::PulpError: PLP0034: The distributor Library-ccv_rhel72_puppet-jboss indicated a failed response when publishing repository <strong>Library-ccv_rhel72_puppet-jboss</strong>.</p></blockquote>

<p>Iniciando serviço</p>

<pre><code># katello-service start
</code></pre>

<p>Verificando serviço</p>

<pre><code># hammer ping
candlepin:
Estado:          ok
Server Response: Duration: 19ms
candlepin_auth:
Estado:          ok
Server Response: Duration: 23ms
pulp:
Estado:          ok
Server Response: Duration: 66ms
foreman_tasks:
Estado:          ok
Server Response: Duration: 882ms
</code></pre>

<p>Verique também na interface web se todos os serviços estão ok, na aba Administer->About</p>

<p>Caso ao logar na interface Web, apresente um erro de &ldquo;undefined method `label' for nil:NilClass&rdquo; atualize o pacote tfm-rubygem-katello e reinicie o serviço. (<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1361793">https://bugzilla.redhat.com/show_bug.cgi?id=1361793</a>)</p>

<p><img src="/images/satellite/img2.jpg" alt="img2" /></p>

<pre><code># rpm -Uvh tfm-rubygem-katello-3.0.0.73-1.el7sat.noarch.rpm
# katello-service restart
</code></pre>

<p><img src="/images/satellite/img3.jpg" alt="img3" /></p>

<h1>Upgrade Client Satellite 6.2</h1>

<p>Desabilite repositório antigo</p>

<pre><code># subscription-manager repos --disable rhel-7-server-satellite-tools-6.1-rpms
</code></pre>

<p>Habilite novo repositório</p>

<pre><code># subscription-manager repos --enable=rhel-7-server-satellite-tools-6.2-rpms
</code></pre>

<p>Realize upgrade do katello-agent</p>

<pre><code># yum upgrade katello-agent
</code></pre>

<h1>Referencias:</h1>

<ul>
<li><p><a href="https://access.redhat.com/blogs/1169563/posts/2464761">https://access.redhat.com/blogs/1169563/posts/2464761</a></p></li>
<li><p><a href="https://access.redhat.com/documentation/en/red-hat-satellite/6.2/single/installation-guide">https://access.redhat.com/documentation/en/red-hat-satellite/6.2/single/installation-guide</a></p></li>
</ul>


		
		
	</div>


</article>

</div>
<nav id="pagenavi">
    
    
        <a href="2" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Licença Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />Todo <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">conteúdo</span> do <a xmlns:cc="http://creativecommons.org/ns#" href="brunocarvalho.net" property="cc:attributionName" rel="cc:attributionURL">brunocarvalho.net</a> está licenciado com a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons - Atribuição-CompartilhaIgual 4.0 Internacional</a>.

<br> CC - 2017
<!--  - 
  Bruno Carvalho -
 -->
 Powered by Octopress/greyshade

</footer>
		</div>
	</div>
	

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>






  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
